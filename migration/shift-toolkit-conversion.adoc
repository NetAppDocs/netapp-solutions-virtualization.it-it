---
sidebar: sidebar 
permalink: migration/shift-toolkit-conversion.html 
keywords: netapp, vmware, esxi, vm, migration, openshift, virtualization, hyper-v, proxmox 
summary:  
---
= Convertire le VM utilizzando Shift Toolkit
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
Utilizzare Shift Toolkit per convertire i dischi delle macchine virtuali VMware ESX (VMDK) nel formato disco Microsoft Hyper-V (VHDX) o Red Hat KVM (QCOW2).  Questo processo include la configurazione di gruppi di risorse, la creazione di progetti di conversione e la pianificazione delle conversioni.



== Conversione

L'opzione di conversione basata su Clone consente di convertire semplicemente il disco virtuale tra hypervisor per i seguenti formati di disco:

* Da VMware ESX a Microsoft Hyper-V (da VMDK a VHDX)
* Da VMware ESX a Red Hat KVM (da VMDK a QCOW2)


I file qcow2 convertiti sono compatibili con qualsiasi hypervisor KVM.  Ad esempio, un file qcow2 può essere utilizzato con KVM basato su RHEL utilizzando virt-manager per creare una VM, così come con Ubuntu KVM, KVM basato su Rocky Linux e altri.  Lo stesso può essere utilizzato con Oracle Linux Virtualization Manager con una modifica e con la virtualizzazione OpenShift dopo l'importazione tramite NetApp Trident.  L'obiettivo è fornire il disco (convertito in secondi in minuti) che può quindi essere integrato negli script di automazione esistenti utilizzati dalle organizzazioni per fornire la VM e assegnare la rete.  Questo approccio aiuta a ridurre i tempi complessivi di migrazione, con la conversione del disco gestita dalle API del toolkit Shift e lo script rimanente che avvia le VM.

Nelle versioni future, Shift Toolkit supporterà la migrazione end-to-end da VMware ad altri hypervisor KVM compatibili.  Tuttavia, con la versione attuale, la conversione può essere eseguita tramite l'interfaccia utente o le API.



=== Converti in formato QCOW2

Per convertire i dischi virtuali nel formato QCOW2 con il toolkit NetApp Shift, seguire questi passaggi generali:

* Creare un tipo di sito di destinazione specificando KVM come hypervisor.
+

NOTE: Per KVM non sono richiesti dettagli sull'hypervisor.

+
image:shift-toolkit-057.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]

* Creare un gruppo di risorse con le VM per le quali è richiesta la conversione del disco
+
image:shift-toolkit-058.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]

+
image:shift-toolkit-059.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]

+
image:shift-toolkit-060.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]

* Creare il progetto per convertire il disco virtuale nel formato QCOW2.
+
image:shift-toolkit-061.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]

+
image:shift-toolkit-062.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]

+
image:shift-toolkit-063.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]

* Designare uno slot utilizzando l'opzione di pianificazione.  Se la conversione deve essere eseguita su base ad hoc, lasciare l'opzione di pianificazione deselezionata.
+
image:shift-toolkit-064.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]

* Una volta creato il progetto, viene avviato un processo prepareVM che esegue automaticamente gli script sulle VM di origine per prepararle alla conversione.
+
image:shift-toolkit-065.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]

* Una volta completato correttamente il processo prepareVM (come mostrato nello screenshot qui sotto), i dischi VM associati alle VM sono pronti per la conversione e lo stato del blueprint verrà aggiornato in "Attivo".
* Fare clic su "Converti" dopo aver pianificato il tempo di inattività richiesto per le VM.
+
image:shift-toolkit-066.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]

* L'operazione di conversione utilizza uno snapshot point-in-time.  Se necessario, spegnere la macchina virtuale e quindi riavviare l'operazione.
+
image:shift-toolkit-067.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]

+
** L'operazione di conversione esegue ciascuna operazione sulla VM e sul rispettivo disco per generare il formato appropriato.
+
image:shift-toolkit-068.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]



* Utilizzare il disco convertito creando manualmente la VM e collegandovi il disco.
+
image:shift-toolkit-069.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]




NOTE: Il toolkit Shift supporta le conversioni dei dischi solo per il formato qcow2.  Non supporta la creazione o la registrazione di VM.  Per utilizzare il disco convertito, creare manualmente la VM e collegare il disco.



=== Converti in formato VHDX

Per convertire i dischi virtuali in formato VHDX con il toolkit NetApp Shift, seguire questi passaggi generali:

* Creare un tipo di sito di destinazione specificando Hyper-V come hypervisor.
* Creare un gruppo di risorse con le VM per le quali è richiesta la conversione del disco
+
image:shift-toolkit-070.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]

+
image:shift-toolkit-071.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]

* Creare il progetto per convertire il disco virtuale nel formato VHDX.  Una volta creato il progetto, i lavori di preparazione verranno avviati automaticamente.
+
image:shift-toolkit-072.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]

* Selezionare "Converti" una volta pianificato il tempo di inattività richiesto per le VM.
+
image:shift-toolkit-073.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]

* L'operazione di conversione esegue ciascuna operazione sulla VM e sul rispettivo disco per generare il formato VHDX appropriato.
+
image:shift-toolkit-074.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]

* Utilizzare il disco convertito creando manualmente la VM e collegandovi il disco.
+
image:shift-toolkit-075.png["Figura che mostra il dialogo di input/output o che rappresenta il contenuto scritto"]




NOTE: Per utilizzare il disco VHDX convertito in una VM, la VM deve essere creata manualmente tramite Hyper-V Manager o comandi PowerShell e il disco deve essere collegato ad essa.  Oltre a ciò, la rete dovrebbe essere mappata manualmente.
